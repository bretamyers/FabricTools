from msal import PublicClientApplication

DEVELOPER_SIGN_ON_CLIENT_ID = "04b07795-8ddb-461a-bbee-02f9e1bf7b46"

class FabricAuthentication:
    def __init__(self):
        self.cred = msal.PublicClientApplication(client_id=DEVELOPER_SIGN_ON_CLIENT_ID, authority="https://login.microsoftonline.com/organizations")
        self.token = cred.acquire_token_interactive(scopes=["https://api.fabric.microsoft.com/.default"])

    # token = {'access_token': 'eyJ0eXAiOiJKV1QiLCJhbGciOiJSUzI1NiIsIng1dCI6ImltaTBZMnowZFlLeEJ0dEFxS19UdDVoWUJUayIsImtpZCI6ImltaTBZMnowZFlLeEJ0dEFxS19UdDVoWUJUayJ9.eyJhdWQiOiJodHRwczovL2FwaS5mYWJyaWMubWljcm9zb2Z0LmNvbSIsImlzcyI6Imh0dHBzOi8vc3RzLndpbmRvd3MubmV0L2E1M2M3NDZmLTc5YTctNGVkOC1hNjRiLWJiZjEzYTNiZGE2YS8iLCJpYXQiOjE3NDA3Nzg1NTIsIm5iZiI6MTc0MDc3ODU1MiwiZXhwIjoxNzQwNzgzNTYwLCJhY2N0IjowLCJhY3IiOiIxIiwiYWlvIjoiQWFRQVcvOFpBQUFBMlBMbWF3WThWRk9kNnIyendJajRobTlVS2pOMjdqRVJPd3k1MmVBMHA3cFFvR1FlSy9oMUMyVzVHRVNzYThZT1FmWFNBWjU5MVZFcjFSQjlGQStvcFRmcWVzY0FQNVRwdnRxYUM0K3VyWDZxWFR2MWZZQ3pOZ2FaaVdLQVkwNHNtRzRRVkd2VVp6eU50U1k4UTd6R1NHSGpkTlZMTlJ4S1loS3dDS3BqdkVWb0hGK1dwMVVSSGNXZmdpbDkzRTJIRW5QL2JJM0YzTVhQamJvY2xlZmk2UT09IiwiYW1yIjpbInB3ZCIsImZpZG8iLCJtZmEiXSwiYXBwaWQiOiIwNGIwNzc5NS04ZGRiLTQ2MWEtYmJlZS0wMmY5ZTFiZjdiNDYiLCJhcHBpZGFjciI6IjAiLCJmYW1pbHlfbmFtZSI6Ik15ZXJzIiwiZ2l2ZW5fbmFtZSI6IkJyZXQiLCJpZHR5cCI6InVzZXIiLCJpcGFkZHIiOiI0Ny4yMjUuMC4xNjQiLCJuYW1lIjoiQnJldCIsIm9pZCI6ImU0Nzc3MTg5LTQ2ZjktNGYyOC1hZDgwLTA5NjVmMTcwMDQ0NiIsInB1aWQiOiIxMDAzMjAwM0U1NTM0Q0REIiwicmgiOiIxLkFiY0FiM1E4cGFkNTJFNm1TN3Z4T2p2YWFna0FBQUFBQUFBQXdBQUFBQUFBQUFEOEFQNjNBQS4iLCJzY3AiOiJ1c2VyX2ltcGVyc29uYXRpb24iLCJzaWQiOiIwMDIxNGI4OS00ZTk1LTQ5NWItYTVjZS0yODg3ZThkYjc0YmUiLCJzdWIiOiJQQzVrZFNTUEVsM0hWa3haX3B1cy0wdnQ1dEtZWEZLZVh5OTJaN2lKZFRRIiwidGlkIjoiYTUzYzc0NmYtNzlhNy00ZWQ4LWE2NGItYmJmMTNhM2JkYTZhIiwidW5pcXVlX25hbWUiOiJicm15ZXJzQGJhbXNxbC5vcmciLCJ1cG4iOiJicm15ZXJzQGJhbXNxbC5vcmciLCJ1dGkiOiIzSnRqUy04M1lrV0drTHFhU2ZZZ0FBIiwidmVyIjoiMS4wIiwid2lkcyI6WyI2MmU5MDM5NC02OWY1LTQyMzctOTE5MC0wMTIxNzcxNDVlMTAiLCJiNzlmYmY0ZC0zZWY5LTQ2ODktODE0My03NmIxOTRlODU1MDkiXSwieG1zX2lkcmVsIjoiMSAyMiJ9.KBmZFLpBD_H9_f6bjscuBRIpDQR7It0L-WggIZg9v6Lww0cF6cNL6QK1qKC9eLVvZebWWVRrxewjbGXEJrLAxByDRRrvYaVAZptd8XG26iO775jTOM_BqoECVkA-eN024-qAA4CgOs7Yiad8TzYLECnz7h0RUtBjRCZ6_SNRYt8ua4iXGt1PurTkShhGFQtEDaw4mCQ0-jIHOvmJsZUzADFY_5U3TE1-ZNnLpJDZ-pNIAwKjHSOAyoqGHbobFl9fotlpRMRUZJmuQs3Iwh0Y_-hhX5V8AgXE_bbd6BqNmigxD4tp-5vB5QXbPaz9-0wGwyNAoiT0qHWGGE0JuYv-FQ'}
    # print(token['access_token'])

    def _get_token(self):
        return self.token['access_token']
        
if __name__ == "__main__":
    auth = FabricAuthentication()
    print(auth._get_token())
